<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        html,
        body,
        iframe,
        canvas {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }
    </style>
    <script type="module">
        import * as THREE from 'https://cdn.skypack.dev/three@110.0.1';
        import React, { useRef } from 'https://cdn.skypack.dev/react@18.0.2';
        import ReactDOM from 'https://cdn.skypack.dev/react-dom@18.0.2';
        import { Canvas, useFrame } from 'https://cdn.skypack.dev/@react-three/fiber@7.0.24';

        const FireShader = {
            uniforms: {
                u_time: { value: 0 },
                u_resolution: { value: new THREE.Vector2(1024, 1024) },
            },
            vertexShader: `
                void main() {
                    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
                }
            `,
            fragmentShader: `
                uniform float u_time;
                uniform vec2 u_resolution;

                void main() {
                    vec2 uv = gl_FragCoord.xy / u_resolution.xy;
                    vec3 color = vec3(1.0, 0.3, 0.1);
                    float borderFire = smoothstep(0.2, 1.0, distance(uv, vec2(0.5, 0.5)));
                    gl_FragColor = vec4(color * borderFire, 1.0);
                }
            `,
        };

        const FireEffect = () => {
            const mesh = useRef();

            useFrame(({ clock }) => {
                const elapsedTime = clock.getElapsedTime();
                mesh.current.material.uniforms.u_time.value = elapsedTime;
            });

            return (
                <mesh>
                    <planeGeometry args={[1024, 1024]} />
                    <shaderMaterial
                        uniforms={FireShader.uniforms}
                        vertexShader={FireShader.vertexShader}
                        fragmentShader={FireShader.fragmentShader}
                        transparent
                    />
                </mesh>
            );
        };

        const App = () => {
            return (
                <Canvas
                    gl={{
                        preserveDrawingBuffer: true,
                        premultipliedAlpha: false,
                        alpha: true,
                        transparent: true,
                        antialias: true,
                        precision: 'highp',
                        powerPreference: 'high-performance',
                    }}
                    dpr={[2, 2]}
                    camera={{ fov: 75, near: 0.1, far: 1000, position: [0, 0, 5] }}
                    style={{ height: 512, width: 512 }}
                >
                    <FireEffect />
                </Canvas>
            );
        };

        ReactDOM.render(<App />, document.body);
    </script>
</head>

<body></body>

</html>

